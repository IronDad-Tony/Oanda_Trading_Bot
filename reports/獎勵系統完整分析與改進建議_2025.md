# ğŸ¯ äº¤æ˜“æ¨¡å‹çå‹µç³»çµ±å®Œæ•´åˆ†æèˆ‡æ”¹é€²å»ºè­° (2025å¹´ç‰ˆ)

## ğŸ—ï¸ ç•¶å‰çå‹µç³»çµ±æ¶æ§‹æ¦‚è¦½

æ‚¨çš„ç³»çµ±æ¡ç”¨äº†**ä¸‰é‡çå‹µè¨ˆç®—æ¶æ§‹**ï¼Œæ ¹æ“šå„ªå…ˆç´šé †åºï¼š

1. **æ¼¸é€²å¼çå‹µè¨ˆç®—å™¨** (ProgressiveRewardCalculator) - ä¸»è¦ç³»çµ±
2. **å¢å¼·ç‰ˆçå‹µè¨ˆç®—å™¨** (EnhancedRewardCalculator) - å‚™ç”¨ç³»çµ±  
3. **å‚³çµ±é¢¨éšªèª¿æ•´çå‹µ** (Standard Reward) - æœ€å¾Œå‚™ç”¨

---

## ğŸ“Š éšæ®µä¸€ï¼šæ¼¸é€²å¼çå‹µç³»çµ±åˆ†æ

### ğŸ” ä¸‰éšæ®µè¨­è¨ˆç†å¿µ

#### **Stage 1: åˆå§‹è¨“ç·´éšæ®µ** 
- **è§¸ç™¼æ¢ä»¶**: å¹³å‡æ¯ç­†äº¤æ˜“æœŸæœ›å€¼ < 0
- **ç›®æ¨™**: è®“æ¨¡å‹å­¸æœƒåŸºç¤äº¤æ˜“æ¦‚å¿µï¼Œé¼“å‹µæ¢ç´¢

**æ ¸å¿ƒæ©Ÿåˆ¶**:
```python
# åŸºç¤æ”¶ç›Šçå‹µï¼ˆç·šæ€§çå‹µï¼‰
profit_reward_factor: 2.0        # ç²åˆ©çå‹µä¿‚æ•¸ 
loss_penalty_factor: 1.0         # è™§ææ‡²ç½°ä¿‚æ•¸
trade_frequency_bonus: 0.1       # äº¤æ˜“é »ç‡çå‹µ
exploration_bonus: 0.5           # æ¢ç´¢çå‹µ
```

**å„ªå‹¢**:
- âœ… é¼“å‹µæ¨¡å‹ç©æ¥µå­¸ç¿’å’Œæ¢ç´¢
- âœ… ç°¡å–®ç›´æ¥çš„ç·šæ€§çå‹µæ©Ÿåˆ¶
- âœ… å¿«é€Ÿåœæçå‹µæ©Ÿåˆ¶

**å•é¡Œ**:
- âš ï¸ éåº¦é¼“å‹µäº¤æ˜“é »ç‡å¯èƒ½å°è‡´éåº¦äº¤æ˜“
- âš ï¸ ç·šæ€§çå‹µç„¡æ³•åæ˜ çœŸå¯¦å¸‚å ´çš„éç·šæ€§ç‰¹æ€§
- âš ï¸ ç¼ºä¹é¢¨éšªèª¿æ•´æ¦‚å¿µ

#### **Stage 2: é€²éšè¨“ç·´éšæ®µ**
- **è§¸ç™¼æ¢ä»¶**: å¹³å‡äº¤æ˜“æœŸæœ›å€¼ > 0ï¼Œå‹ç‡ < 50%
- **ç›®æ¨™**: å¼•å…¥é¢¨éšªæ¦‚å¿µï¼Œæ•™å°é¢¨éšªèª¿æ•´æ”¶ç›Š

**æ ¸å¿ƒæ©Ÿåˆ¶**:
```python
# é¢¨éšªèª¿æ•´æŒ‡æ¨™
sortino_ratio_factor: 1.5        # ç´¢æè«¾æ¯”ç‡ä¿‚æ•¸
sharpe_ratio_factor: 1.0         # å¤æ™®æ¯”ç‡ä¿‚æ•¸  
drawdown_penalty_factor: 2.0     # å›æ’¤æ‡²ç½°ä¿‚æ•¸
profit_run_bonus: 1.0            # è®“åˆ©æ½¤å¥”è·‘çå‹µ
```

**å„ªå‹¢**:
- âœ… å¼•å…¥å°ˆæ¥­çš„é¢¨éšªèª¿æ•´æŒ‡æ¨™
- âœ… å¯¦ç¾"è®“åˆ©æ½¤å¥”è·‘ï¼Œå¿«é€Ÿæ­¢æ"ç†å¿µ
- âœ… é–‹å§‹è€ƒæ…®å‹ç‡å› ç´ 

**å•é¡Œ**:
- âš ï¸ ç´¢æè«¾æ¯”ç‡è¦æ±‚20æ­¥æ­·å²æ•¸æ“šï¼Œå¯èƒ½åæ‡‰é²ç·©
- âš ï¸ å›æ’¤æ‡²ç½°ä¿‚æ•¸2.0å¯èƒ½éæ–¼åš´å²
- âš ï¸ ç¼ºä¹å¸‚å ´è¶¨å‹¢æ„ŸçŸ¥

#### **Stage 3: æœ€çµ‚è¨“ç·´éšæ®µ**
- **è§¸ç™¼æ¢ä»¶**: å¹³å‡äº¤æ˜“æœŸæœ›å€¼ > 0ï¼Œå‹ç‡ â‰¥ 50%
- **ç›®æ¨™**: å¯¦ç¾å°ˆæ¥­ç´šäº¤æ˜“è¡¨ç¾

**æ ¸å¿ƒæ©Ÿåˆ¶**:
```python
# é«˜ç´šç¸¾æ•ˆæŒ‡æ¨™
information_ratio_factor: 2.0    # ä¿¡æ¯æ¯”ç‡
omega_ratio_factor: 1.8          # Omegaæ¯”ç‡
kelly_criterion_bonus: 1.5       # Kellyæº–å‰‡çå‹µ
regime_adaptation_bonus: 1.2     # å¸‚å ´é©æ‡‰çå‹µ
behavioral_finance_bonus: 0.5    # è¡Œç‚ºé‡‘èå­¸çå‹µ
```

**å„ªå‹¢**:
- âœ… æ•´åˆæœ€å‰æ²¿çš„é‡åŒ–æŒ‡æ¨™
- âœ… Kellyæº–å‰‡å€‰ä½ç®¡ç†
- âœ… å¸‚å ´ç‹€æ…‹é©æ‡‰æ©Ÿåˆ¶

**å•é¡Œ**:
- âš ï¸ æŒ‡æ¨™éæ–¼è¤‡é›œï¼Œå¯èƒ½é›£ä»¥æ”¶æ–‚
- âš ï¸ æŸäº›æŒ‡æ¨™éœ€è¦å¤§é‡æ­·å²æ•¸æ“š
- âš ï¸ è¡Œç‚ºé‡‘èå­¸çå‹µå¯¦ç¾è¼ƒç‚ºç°¡åŒ–

---

## ğŸ“Š éšæ®µäºŒï¼šå¢å¼·ç‰ˆçå‹µç³»çµ±åˆ†æ

### ğŸ” å…­å¤§æ ¸å¿ƒçµ„ä»¶

#### **1. å¢å¼·é¢¨éšªèª¿æ•´æ”¶ç›Š** (æ¬Šé‡40%)
```python
# ç•¶å‰å¯¦ç¾
risk_adjusted_reward = enhanced_risk_adjusted_reward() * 0.4
```
- **ç´¢æè«¾æ¯”ç‡**: å°ˆæ³¨ä¸‹è¡Œé¢¨éšª
- **å‹•æ…‹ä¿‚æ•¸èª¿æ•´**: æ ¹æ“šæ”¶ç›Šæ³¢å‹•æ€§èª¿æ•´
- **å•é¡Œ**: æ»¾å‹•çª—å£åƒ…50æ­¥ï¼Œå¯èƒ½ä¸å¤ ç©©å®š

#### **2. æ™ºèƒ½æ‰‹çºŒè²»ç®¡ç†** (æ¬Šé‡10%)  
```python
# å‹•æ…‹èª¿æ•´æ‡²ç½°ä¿‚æ•¸
if win_rate > 0.6 and profit_ratio > 3:
    penalty_factor = 0.3        # é«˜æ•ˆäº¤æ˜“æ¸›å°‘æ‡²ç½°
elif win_rate < 0.3:
    penalty_factor = 2.0        # ä½æ•ˆäº¤æ˜“å¢åŠ æ‡²ç½°
```
- **å„ªå‹¢**: å€åˆ†æœ‰æ•ˆäº¤æ˜“èˆ‡ç„¡æ•ˆäº¤æ˜“
- **å•é¡Œ**: åˆ¤æ–·é‚è¼¯å¯èƒ½éæ–¼ç°¡å–®

#### **3. å‹•æ…‹å›æ’¤ç®¡ç†** (æ¬Šé‡20%)
```python
# å¤šå±¤ç´šå›æ’¤æ§åˆ¶
peak_portfolio_value = max(peak_value, current_value)
current_drawdown = (peak_value - current_value) / peak_value
```
- **å„ªå‹¢**: é é˜²éåº¦å›æ’¤
- **å•é¡Œ**: ç¼ºä¹å›æ’¤æ¢å¾©çå‹µæ©Ÿåˆ¶

#### **4. å¢å¼·æŒå€‰æ¿€å‹µ** (æ¬Šé‡15%)
```python
# è¤‡åˆ©æ•ˆæ‡‰çå‹µ
compound_factor = (1.08 ** min(hold_duration, 25)) - 1.0
position_reward = pnl_ratio * duration_factor * compound_factor
```
- **å„ªå‹¢**: å¯¦ç¾"è®“åˆ©æ½¤å¥”è·‘"
- **å•é¡Œ**: è¤‡åˆ©ä¿‚æ•¸1.08å¯èƒ½éæ–¼æ¨‚è§€

#### **5. å¸‚å ´è¶¨å‹¢æ„ŸçŸ¥** (æ¬Šé‡10%)
```python
# å¤šæ™‚é–“æ¡†æ¶è¶¨å‹¢åˆ†æ  
short_term_trend = calculate_trend_slope(prices[-5:])
long_term_trend = calculate_trend_slope(prices[-15:])
```
- **å„ªå‹¢**: è€ƒæ…®è¶¨å‹¢ä¸€è‡´æ€§
- **å•é¡Œ**: è¶¨å‹¢è¨ˆç®—æ–¹æ³•è¼ƒç‚ºç°¡å–®

#### **6. å‹ç‡æ¿€å‹µæ©Ÿåˆ¶** (æ¬Šé‡5%)
```python
# å‹ç‡åˆ†ç´šçå‹µ
if win_rate >= 0.65 and profit_loss_ratio >= 1.2:
    bonus = 1.0
elif win_rate < 0.35:
    penalty = -0.8
```
- **å„ªå‹¢**: ç›´æ¥æ¿€å‹µå‹ç‡æå‡
- **å•é¡Œ**: é–€æª»å¯èƒ½è¨­å®šéé«˜

---

## ğŸš€ æ ¸å¿ƒå•é¡Œè­˜åˆ¥èˆ‡æ”¹é€²å»ºè­°

### âš ï¸ ä¸»è¦å•é¡Œ

#### **1. éšæ®µåˆ‡æ›æ©Ÿåˆ¶ä¸å¤ éˆæ´»**
- **å•é¡Œ**: 25æ­¥å†·å»æœŸå¯èƒ½éŒ¯éå¿«é€Ÿå¸‚å ´è®ŠåŒ–
- **æ”¹é€²**: å¼•å…¥å¸‚å ´æ³¢å‹•æ€§æŒ‡æ¨™å‹•æ…‹èª¿æ•´å†·å»æœŸ

#### **2. æ­·å²æ•¸æ“šä¾è³´éé‡**
- **å•é¡Œ**: å¤šå€‹æŒ‡æ¨™éœ€è¦20-50æ­¥æ­·å²æ•¸æ“šæ‰èƒ½è¨ˆç®—
- **æ”¹é€²**: è¨­è¨ˆé©æ‡‰æ€§æ›´å¼·çš„çŸ­æœŸæŒ‡æ¨™

#### **3. çå‹µçµ„ä»¶æ¬Šé‡ä¸å¹³è¡¡**  
- **å•é¡Œ**: é¢¨éšªèª¿æ•´æ”¶ç›Šæ¬Šé‡40%éé«˜ï¼Œå¯èƒ½éåº¦ä¿å®ˆ
- **æ”¹é€²**: é‡æ–°å¹³è¡¡å„çµ„ä»¶æ¬Šé‡ï¼Œæé«˜ç²åˆ©æ¿€å‹µ

#### **4. ç¼ºä¹å¸‚å ´ç‹€æ…‹æ„ŸçŸ¥**
- **å•é¡Œ**: æœªå€åˆ†ç‰›å¸‚ã€ç†Šå¸‚ã€éœ‡ç›ªå¸‚çš„ä¸åŒç­–ç•¥
- **æ”¹é€²**: å¼•å…¥å¸‚å ´ç‹€æ…‹è­˜åˆ¥æ¨¡çµ„

### ğŸ¯ å…·é«”æ”¹é€²æ–¹æ¡ˆ

#### **æ”¹é€²1: å„ªåŒ–éšæ®µåˆ‡æ›é‚è¼¯**
```python
def adaptive_stage_evaluation(self):
    """è‡ªé©æ‡‰éšæ®µè©•ä¼°"""
    # åŸºæ–¼å¸‚å ´æ³¢å‹•æ€§å‹•æ…‹èª¿æ•´è©•ä¼°é »ç‡
    market_volatility = self.calculate_market_volatility()
    
    if market_volatility > 0.03:  # é«˜æ³¢å‹•å¸‚å ´
        evaluation_interval = 20   # æ›´é »ç¹è©•ä¼°
        cooldown_period = 10
    else:  # ç©©å®šå¸‚å ´
        evaluation_interval = 50   # æ¨™æº–è©•ä¼°
        cooldown_period = 25
    
    # çµåˆå¤šå€‹æŒ‡æ¨™é€²è¡Œéšæ®µåˆ¤æ–·
    trade_expectation = self.calculate_trade_expectation()
    win_rate = self.calculate_win_rate()
    risk_adjusted_return = self.calculate_risk_adjusted_return()
    
    # ç¶œåˆè©•åˆ†æ©Ÿåˆ¶
    stage_score = (
        trade_expectation * 0.4 +
        (win_rate - 0.5) * 0.3 +  
        risk_adjusted_return * 0.3
    )
    
    if stage_score < -0.1:
        return 1
    elif stage_score < 0.1:
        return 2
    else:
        return 3
```

#### **æ”¹é€²2: é‡æ–°è¨­è¨ˆçå‹µæ¬Šé‡**
```python
# å»ºè­°çš„æ–°æ¬Šé‡åˆ†é…ï¼ˆæ›´ç©æ¥µçš„ç›ˆåˆ©å°å‘ï¼‰
new_reward_weights = {
    'profit_momentum': 0.25,           # ç›ˆåˆ©å‹•é‡ï¼ˆæ–°å¢ï¼‰
    'risk_adjusted_return': 0.20,     # å¾40%é™ä½åˆ°20%
    'position_holding': 0.20,         # å¾15%æå‡åˆ°20%
    'trend_following': 0.15,          # å¾10%æå‡åˆ°15%
    'drawdown_control': 0.10,         # å¾20%é™ä½åˆ°10%
    'win_rate_bonus': 0.07,           # å¾5%æå‡åˆ°7%
    'commission_efficiency': 0.03      # å¾10%é™ä½åˆ°3%
}
```

#### **æ”¹é€²3: æ–°å¢ç›ˆåˆ©å‹•é‡æŒ‡æ¨™**
```python
def calculate_profit_momentum(self):
    """è¨ˆç®—ç›ˆåˆ©å‹•é‡æŒ‡æ¨™"""
    if len(self.returns_history) < 10:
        return Decimal('0.0')
    
    recent_returns = self.returns_history[-10:]
    
    # é€£çºŒç›ˆåˆ©çå‹µ
    consecutive_profits = 0
    for i in range(len(recent_returns)-1, -1, -1):
        if recent_returns[i] > 0:
            consecutive_profits += 1
        else:
            break
    
    # ç›ˆåˆ©åŠ é€Ÿåº¦ï¼ˆæ”¶ç›Šéå¢è¶¨å‹¢ï¼‰
    if len(recent_returns) >= 5:
        early_avg = sum(recent_returns[:5]) / 5
        late_avg = sum(recent_returns[5:]) / 5
        acceleration = late_avg - early_avg
    else:
        acceleration = 0
    
    # ç¶œåˆç›ˆåˆ©å‹•é‡åˆ†æ•¸
    momentum_score = (
        consecutive_profits * 0.1 +        # é€£çºŒç›ˆåˆ©çå‹µ
        max(0, acceleration * 10) * 0.2    # ç›ˆåˆ©åŠ é€Ÿçå‹µ
    )
    
    return Decimal(str(momentum_score))
```

#### **æ”¹é€²4: å¸‚å ´ç‹€æ…‹é©æ‡‰çå‹µ**
```python
def market_state_adaptive_reward(self):
    """å¸‚å ´ç‹€æ…‹é©æ‡‰çå‹µ"""
    # è­˜åˆ¥å¸‚å ´ç‹€æ…‹
    market_state = self.identify_market_state()
    
    # æ ¹æ“šå¸‚å ´ç‹€æ…‹èª¿æ•´ç­–ç•¥çå‹µ
    if market_state == 'trending':
        # è¶¨å‹¢å¸‚å ´ï¼šçå‹µè¶¨å‹¢è·Ÿéš¨
        return self.trend_following_bonus * 1.5
    elif market_state == 'ranging':
        # éœ‡ç›ªå¸‚å ´ï¼šçå‹µå¿«é€²å¿«å‡º
        return self.quick_profit_taking_bonus * 1.3
    elif market_state == 'volatile':
        # é«˜æ³¢å‹•å¸‚å ´ï¼šçå‹µé¢¨éšªæ§åˆ¶
        return self.risk_control_bonus * 1.2
    else:
        return Decimal('0.0')

def identify_market_state(self):
    """è­˜åˆ¥ç•¶å‰å¸‚å ´ç‹€æ…‹"""
    if len(self.returns_history) < 20:
        return 'unknown'
    
    returns = self.returns_history[-20:]
    volatility = np.std(returns)
    trend_strength = abs(np.mean(returns))
    
    if trend_strength > volatility * 0.5:
        return 'trending'
    elif volatility > 0.02:
        return 'volatile' 
    else:
        return 'ranging'
```

---

## ğŸ“ˆ å‹ç‡æå‡ç­–ç•¥

### ğŸ¯ æ ¸å¿ƒæ”¹é€²é‡é»

#### **1. æ›´æ¿€é€²çš„ç›ˆåˆ©æŒå€‰çå‹µ**
```python
def enhanced_profit_holding_reward(self):
    """å¢å¼·ç›ˆåˆ©æŒå€‰çå‹µ"""
    total_reward = Decimal('0.0')
    
    for position in self.current_positions:
        if position.unrealized_pnl > 0:
            profit_ratio = position.unrealized_pnl / self.initial_capital
            hold_duration = position.hold_duration
            
            # åˆ†ç´šçå‹µåˆ¶åº¦
            if profit_ratio > 0.02:      # è¶…é2%ç²åˆ©
                base_reward = profit_ratio * 2.0
            elif profit_ratio > 0.01:    # 1-2%ç²åˆ©  
                base_reward = profit_ratio * 1.5
            else:                        # å°æ–¼1%ç²åˆ©
                base_reward = profit_ratio * 1.0
            
            # æŒå€‰æ™‚é–“çå‹µï¼ˆéç·šæ€§å¢é•·ï¼‰
            time_factor = min(1.0 + (hold_duration / 10) ** 0.5, 3.0)
            
            total_reward += base_reward * time_factor
    
    return total_reward
```

#### **2. æ™ºèƒ½æ­¢æçå‹µ**
```python
def intelligent_stop_loss_reward(self):
    """æ™ºèƒ½æ­¢æçå‹µ"""
    recent_trades = self.trade_log[-10:]
    stop_loss_bonus = Decimal('0.0')
    
    for trade in recent_trades:
        if trade.realized_pnl < 0:  # è™§æäº¤æ˜“
            loss_ratio = abs(trade.realized_pnl) / self.initial_capital
            hold_duration = trade.hold_duration
            
            # å¿«é€Ÿæ­¢æçå‹µï¼ˆé¿å…å°è™§è®Šå¤§è™§ï¼‰
            if hold_duration <= 3 and loss_ratio <= 0.005:
                stop_loss_bonus += 0.1 * (0.005 - loss_ratio)
            
            # é©åº¦æ­¢æçå‹µï¼ˆæ§åˆ¶è™§æåœ¨åˆç†ç¯„åœï¼‰
            elif hold_duration <= 8 and loss_ratio <= 0.015:
                stop_loss_bonus += 0.05 * (0.015 - loss_ratio)
    
    return stop_loss_bonus
```

#### **3. é€£çºŒç²åˆ©çå‹µ**
```python
def consecutive_profit_bonus(self):
    """é€£çºŒç²åˆ©çå‹µ"""
    recent_trades = self.trade_log[-20:]
    closed_trades = [t for t in recent_trades if t.realized_pnl != 0]
    
    if len(closed_trades) < 3:
        return Decimal('0.0')
    
    # è¨ˆç®—é€£çºŒç²åˆ©æ¬¡æ•¸
    consecutive_wins = 0
    for trade in reversed(closed_trades):
        if trade.realized_pnl > 0:
            consecutive_wins += 1
        else:
            break
    
    # é€£çºŒç²åˆ©çå‹µï¼ˆæŒ‡æ•¸å¢é•·ï¼‰
    if consecutive_wins >= 5:
        return Decimal('0.5')
    elif consecutive_wins >= 3:
        return Decimal('0.2')
    elif consecutive_wins >= 2:
        return Decimal('0.1')
    else:
        return Decimal('0.0')
```

---

## ğŸ“Š æœŸæœ›å€¼æå‡ç­–ç•¥

### ğŸ¯ æ ¸å¿ƒæ”¹é€²é‡é»

#### **1. ç›ˆè™§æ¯”å„ªåŒ–çå‹µ**
```python
def profit_loss_ratio_optimization(self):
    """ç›ˆè™§æ¯”å„ªåŒ–çå‹µ"""
    recent_trades = self.trade_log[-30:]
    closed_trades = [t for t in recent_trades if t.realized_pnl != 0]
    
    if len(closed_trades) < 5:
        return Decimal('0.0')
    
    winning_trades = [t for t in closed_trades if t.realized_pnl > 0]
    losing_trades = [t for t in closed_trades if t.realized_pnl < 0]
    
    if not winning_trades or not losing_trades:
        return Decimal('0.0')
    
    avg_win = sum(t.realized_pnl for t in winning_trades) / len(winning_trades)
    avg_loss = sum(abs(t.realized_pnl) for t in losing_trades) / len(losing_trades)
    
    profit_loss_ratio = avg_win / avg_loss
    
    # ç›ˆè™§æ¯”çå‹µåˆ†ç´š
    if profit_loss_ratio >= 2.0:
        return Decimal('0.8')      # å“è¶Šç›ˆè™§æ¯”
    elif profit_loss_ratio >= 1.5:
        return Decimal('0.4')      # è‰¯å¥½ç›ˆè™§æ¯”
    elif profit_loss_ratio >= 1.0:
        return Decimal('0.0')      # åŸºæœ¬ç›ˆè™§æ¯”
    else:
        return Decimal('-0.2')     # ä¸è‰¯ç›ˆè™§æ¯”æ‡²ç½°
```

#### **2. äº¤æ˜“è³ªé‡è©•ä¼°**
```python
def trade_quality_assessment(self):
    """äº¤æ˜“è³ªé‡è©•ä¼°çå‹µ"""
    recent_trades = self.trade_log[-20:]
    
    quality_score = Decimal('0.0')
    
    for trade in recent_trades:
        if trade.realized_pnl != 0:
            # æŒå€‰æ™‚é–“åˆç†æ€§ï¼ˆé¿å…éçŸ­æˆ–éé•·ï¼‰
            if 2 <= trade.hold_duration <= 20:
                quality_score += Decimal('0.05')
            
            # ç²åˆ©äº¤æ˜“çš„æŒå€‰æ™‚é–“ï¼ˆè®“åˆ©æ½¤å¥”è·‘ï¼‰
            if trade.realized_pnl > 0 and trade.hold_duration >= 5:
                quality_score += Decimal('0.1')
            
            # è™§æäº¤æ˜“çš„å¿«é€Ÿæ­¢æ
            if trade.realized_pnl < 0 and trade.hold_duration <= 5:
                quality_score += Decimal('0.1')
            
            # é¿å…å¤§å¹…è™§æ
            loss_ratio = abs(trade.realized_pnl) / self.initial_capital
            if trade.realized_pnl < 0 and loss_ratio > 0.02:
                quality_score -= Decimal('0.3')
    
    return quality_score
```

---

## ğŸ”§ æ¨è–¦å¯¦æ–½è¨ˆåŠƒ

### ğŸ“… ç¬¬ä¸€éšæ®µ (1-2é€±): åŸºç¤å„ªåŒ–
1. **èª¿æ•´çå‹µæ¬Šé‡åˆ†é…**
   - é™ä½é¢¨éšªèª¿æ•´æ”¶ç›Šæ¬Šé‡åˆ°20%
   - æé«˜ç›ˆåˆ©æŒå€‰çå‹µåˆ°20%
   - å¢åŠ è¶¨å‹¢è·Ÿéš¨çå‹µåˆ°15%

2. **å„ªåŒ–æ­¢ææ©Ÿåˆ¶**
   - å¯¦æ–½æ™ºèƒ½æ­¢æçå‹µ
   - åŠ å¼·å¿«é€Ÿæ­¢ææ¿€å‹µ

### ğŸ“… ç¬¬äºŒéšæ®µ (2-3é€±): é€²éšåŠŸèƒ½
1. **æ–°å¢ç›ˆåˆ©å‹•é‡æŒ‡æ¨™**
   - é€£çºŒç²åˆ©çå‹µæ©Ÿåˆ¶
   - ç›ˆåˆ©åŠ é€Ÿåº¦çå‹µ

2. **å¸‚å ´ç‹€æ…‹é©æ‡‰**
   - è¶¨å‹¢å¸‚å ´ç­–ç•¥èª¿æ•´
   - éœ‡ç›ªå¸‚å ´ç­–ç•¥èª¿æ•´

### ğŸ“… ç¬¬ä¸‰éšæ®µ (3-4é€±): ç²¾ç´°èª¿å„ª
1. **äº¤æ˜“è³ªé‡è©•ä¼°ç³»çµ±**
   - ç›ˆè™§æ¯”å„ªåŒ–çå‹µ
   - äº¤æ˜“æ•ˆç‡è©•ä¼°

2. **åƒæ•¸å‹•æ…‹å„ªåŒ–**
   - A/Bæ¸¬è©¦ä¸åŒåƒæ•¸çµ„åˆ
   - å›æ¸¬é©—è­‰æ”¹é€²æ•ˆæœ

---

## ğŸ“ˆ é æœŸæ”¹é€²æ•ˆæœ

### ğŸ¯ é‡åŒ–ç›®æ¨™

| æŒ‡æ¨™ | ç•¶å‰æ°´å¹³ | ç›®æ¨™æ°´å¹³ | æ”¹é€²å¹…åº¦ |
|------|---------|---------|----------|
| å‹ç‡ | ~45% | 60%+ | +33% |
| å¹³å‡ç›ˆè™§æ¯” | ~1.1 | 1.5+ | +36% |
| æœ€å¤§å›æ’¤ | ~8% | <5% | -38% |
| å¤æ™®æ¯”ç‡ | ~0.6 | 1.0+ | +67% |
| ç²åˆ©å› å­ | ~1.05 | 1.3+ | +24% |

### ğŸ“Š é¢¨éšªè©•ä¼°

**é«˜é¢¨éšªé …ç›®**:
- éåº¦å„ªåŒ–å¯èƒ½å°è‡´éæ“¬åˆ
- æ–°æŒ‡æ¨™å¯èƒ½å¢åŠ ç³»çµ±è¤‡é›œåº¦

**ä¸­é¢¨éšªé …ç›®**:
- æ¬Šé‡èª¿æ•´å¯èƒ½å½±éŸ¿ç³»çµ±ç©©å®šæ€§
- å¸‚å ´ç‹€æ…‹è­˜åˆ¥æº–ç¢ºæ€§å•é¡Œ

**ä½é¢¨éšªé …ç›®**:
- æ­¢ææ©Ÿåˆ¶å„ªåŒ–
- é€£çºŒç²åˆ©çå‹µ

---

## ğŸ’¡ ç‰¹æ®Šå»ºè­°

### ğŸ” ç›£æ§é‡é»
1. **æ¯æ—¥ç›£æ§æŒ‡æ¨™**
   - å‹ç‡è®ŠåŒ–è¶¨å‹¢
   - å¹³å‡æŒå€‰æ™‚é–“
   - ç›ˆè™§æ¯”åˆ†å¸ƒ

2. **æ¯é€±è©•ä¼°é …ç›®**
   - çå‹µçµ„ä»¶è²¢ç»åº¦
   - éšæ®µåˆ‡æ›é »ç‡
   - å¸‚å ´é©æ‡‰æ€§è¡¨ç¾

3. **æ¯æœˆæ·±åº¦åˆ†æ**
   - ä¸åŒå¸‚å ´ç’°å¢ƒä¸‹çš„è¡¨ç¾
   - åƒæ•¸æ•æ„Ÿæ€§æ¸¬è©¦
   - æ¨¡å‹ç©©å®šæ€§è©•ä¼°

### âš¡ å¿«é€Ÿå•Ÿå‹•å»ºè­°
å¦‚æœå¸Œæœ›ç«‹å³çœ‹åˆ°æ”¹é€²æ•ˆæœï¼Œå»ºè­°å„ªå…ˆå¯¦æ–½ï¼š

1. **èª¿æ•´æŒå€‰çå‹µæ¬Šé‡**ï¼šå¾15%æå‡åˆ°25%
2. **é™ä½æ‰‹çºŒè²»æ‡²ç½°**ï¼šå¾ç•¶å‰ä¿‚æ•¸æ¸›åŠ
3. **å¢å¼·å¿«é€Ÿæ­¢æçå‹µ**ï¼šè™§æåœ¨0.5%å…§ä¸”3æ­¥å…§æ­¢æçµ¦äºˆ0.2çå‹µ

é€™äº›æ”¹é€²é æœŸèƒ½åœ¨2-3å€‹äº¤æ˜“æ—¥å…§çœ‹åˆ°æ˜é¡¯çš„å‹ç‡æå‡æ•ˆæœã€‚

---

*æ­¤åˆ†æå ±å‘ŠåŸºæ–¼æ‚¨ç•¶å‰çš„çå‹µç³»çµ±ä»£ç¢¼æ·±åº¦åˆ†æè€Œæˆï¼Œå»ºè­°åœ¨å¯¦æ–½å‰é€²è¡Œå……åˆ†çš„å›æ¸¬é©—è­‰ã€‚*
